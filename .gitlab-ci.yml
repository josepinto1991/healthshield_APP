sync-to-github:
  image: alpine:latest
  before_script:
    - apk add --no-cache git
    - git config --global user.email "ci@gitlab.com"
    - git config --global user.name "GitLab CI"
  script:
    - echo "=== SINCRONIZACIÓN INICIADA ==="
    
    # 1. Obtener TODAS las ramas del origen
    - git fetch origin '+refs/heads/*:refs/heads/*'
    
    # 2. Crear/Cambiar a la rama main localmente
    - git checkout -B main origin/main
    
    # 3. Configurar GitHub
    - git remote add github "https://josepinto1991:$GITHUB_TOKEN@github.com/josepinto1991/healthshield_APP.git" || true
    
    # 4. Empujar con referencia explícita
    - git push github HEAD:main --force
    
    - echo "✅ SINCRONIZACIÓN COMPLETADA"
  only:
    - main